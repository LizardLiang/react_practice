(self.webpackChunkproject_test=self.webpackChunkproject_test||[]).push([[452],{9713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},1216:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Z});var i=n(9713),a=n.n(i),r=n(7294),o=n(8048),s=n(5697),l=n.n(s),d=n(9163),m=n(9198),c=n(4890);const p={title:"New Year!!",year:2021,month:1,day:1,hour:0,minute:0,second:0,isAnnual:!0},h={dates:[],curUser:""},u=(0,c.MT)(((e=h,t)=>{switch(t.type){case"addDate":return{...e,dates:[...e.dates,t.payload]};case"deleteDate":return{...e,dates:e.dates.filter((e=>e.title!==t.payload))};case"setUser":return Object.assign({},e,{curUser:t.payload});case"clearTimer":return Object.assign({},e,{curUser:"",dates:[p]});default:return e}})),f=d.ZP.div.withConfig({displayName:"CountDown__EditDiv",componentId:"sc-16pguoj-0"})(["width:70%;height:auto;display:",";flex-direction:column;align-items:center;@media screen and (max-width:767px){font-size:1.5rem;}&:hover{box-shadow:0 0 20px rgba(0,0,0,0.5)}"],(e=>e.display||"flex")),g=d.ZP.input.withConfig({displayName:"CountDown__EditInput",componentId:"sc-16pguoj-1"})(["font-size:2rem;width:100%;background:rgb(47,49,54);border:1px solid rgba(255,255,255,0.5);border-radius:9px;margin:0 1rem;color:white;&:hover{box-shadow:inset 0 0 10px white;}@media screen and (max-width:767px) and (min-width:375px){font-size:1rem;}@media screen and (max-width:374px){font-size:0.7rem;}"]),y=d.ZP.div.withConfig({displayName:"CountDown__EditSecDiv",componentId:"sc-16pguoj-2"})(["display:flex;width:100%;margin:1rem 0;#title{width:80%;}"]),w=d.ZP.div.withConfig({displayName:"CountDown__EditButSecDiv",componentId:"sc-16pguoj-3"})(["display:flex;justify-content:flex-end;width:100%;margin:1rem 0;"]),x=d.ZP.button.withConfig({displayName:"CountDown__EditButton",componentId:"sc-16pguoj-4"})(["margin:0 1rem;font-size:2rem;background:rgb(47,49,54);border:1px solid rgba(255,255,255,0.3);border-radius:9px;color:white;@media screen and (max-width:414px){font-size:1rem;margin:0 0.2rem;}"]),D=d.ZP.div.withConfig({displayName:"CountDown__OptionDiv",componentId:"sc-16pguoj-5"})(["display:flex;align-items:center;justify-content:center;width:15%;@media screen and (max-width:768px){width:25%;}@media screen and (max-width:540px){width:36%;}@media screen and (max-width:375px){width:27%;}"]),v=d.ZP.input.withConfig({displayName:"CountDown__OptionInput",componentId:"sc-16pguoj-6"})(["margin:5px;width:31.719px;height:31.719px;@media screen and (max-width:425px){width:15px;height:15px;}"]),E=d.ZP.label.withConfig({displayName:"CountDown__OptionLabel",componentId:"sc-16pguoj-7"})(["font-size:2rem;margin-bottom:0;@media screen and (max-width:425px){font-size:1rem;}"]);class b extends r.Component{constructor(...e){super(...e),a()(this,"gatherDateInfo",(()=>{let e=document.getElementById("IsAnnually").checked,t={title:document.getElementById("title").value,year:document.getElementById("y").value,month:document.getElementById("m").value,day:document.getElementById("d").value,hour:document.getElementById("hr").value,minute:document.getElementById("min").value,second:document.getElementById("sec").value,isAnnual:e};for(let n in t)if("isAnnual"==n){if(null==e)return void alert("checkbox error")}else if("year"==n&&0==t.isAnnual){if(isNaN(t[n])||""==t[n])return void alert("未指定年分")}else if("month"==n){if(t[n]>12||t[n]<1)return void alert("指定月份錯誤")}else if("day"==n){let e=new Date(t.year,t.month,0).toString().split(" ")[2];if(t[n]<1||t[n]>e)return void alert("指定日期錯誤")}else if("hour"==n){if(t[n]<0||t[n]>=24)return void alert("指定小時數錯誤")}else if("minute"==n){if(t[n]<0||t[n]>=60)return void alert("指定分鐘數錯誤")}else if("second"==n){if(t[n]<0||t[n]>=60)return void alert("指定秒數錯誤")}else if("title"==n&&null==t[n])return void alert("未輸入標題");this.props.sendDate(t)}))}static get propTypes(){return{clickevent:l().func,sendDate:l().func,display:l().string,setDis:l().func}}render(){return r.createElement(f,{display:this.props.display,className:"EditDiv"},"輸入你自己的計時器",r.createElement(y,null,r.createElement(g,{id:"title",className:"title",placeholder:"Title"}),r.createElement(D,null,r.createElement(v,{type:"checkbox",id:"IsAnnually"}),r.createElement(E,null,"每年"))),r.createElement(y,null,r.createElement(g,{id:"y",placeholder:"year"}),r.createElement(g,{id:"m",placeholder:"month"}),r.createElement(g,{id:"d",placeholder:"day"})),r.createElement(y,null,r.createElement(g,{id:"hr",placeholder:"hour"}),r.createElement(g,{id:"min",placeholder:"minute"}),r.createElement(g,{id:"sec",placeholder:"second"})),r.createElement(w,null,r.createElement(x,{onClick:this.gatherDateInfo},"Save"),r.createElement(x,{onClick:()=>{this.props.setDis("none")}},"Cancel")))}}const T=d.ZP.div.withConfig({displayName:"CountDown__TimeDiv",componentId:"sc-16pguoj-8"})(["display:flex;font-size:2rem;text-align:center;div{margin:0 2rem;@media screen and (max-width:540px){margin:0 1rem;}}p{font-weight:bold;font-size:5rem;}@media screen and (max-width:800px){div{font-size:2rem;margin:0 2rem;}p{font-size:3rem;}}@media screen and (max-width:540px){div{font-size:1rem;margin:0 1rem;}}@media screen and (max-width:425px){div{font-size:1rem;margin:0 0.9rem;}p{font-size:2rem;}}@media screen and (max-width:280px){div{margin:0px 0.3rem;}}"]),C=d.ZP.div.withConfig({displayName:"CountDown__TimerBlockDiv",componentId:"sc-16pguoj-9"})(["display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:2rem;border-radius:20px;width:70%;&:hover{box-shadow:0 0 20px black;}"]),I=d.ZP.div.withConfig({displayName:"CountDown__HeaderDiv",componentId:"sc-16pguoj-10"})(["display:flex;width:100%;justify-content:space-between;align-items:center;.lastButton{justify-content:flex-end;}.blockTitle{justify-content:center;text-align:center;@media screen and (max-width:280px){font-size:2rem;}}"]),j=d.ZP.button.withConfig({displayName:"CountDown__HeaderButton",componentId:"sc-16pguoj-11"})(["font-size:3rem;background:none;color:#B6B8C1;text-align:right;@media screen and (max-width:425px){font-size:2rem;}&:hover,&:active{color:white;}&:focus{outline:none;div{display:flex;}}"]),_=d.ZP.div.withConfig({displayName:"CountDown__TimerTitleSep",componentId:"sc-16pguoj-12"})(["width:25%;display:flex;"]);let P=864e5,S=36e5;class k extends r.Component{constructor(e){super(e),a()(this,"ToDays",(()=>{let e=Math.floor((this.props.targetDate-this.props.passTime)/P);return e<10?"0"+e:e})),a()(this,"ToHour",(()=>{let e=Math.floor((this.props.targetDate-this.props.passTime)%P/S);return e<10?"0"+e:e})),a()(this,"ToMin",(()=>{let e=Math.floor((this.props.targetDate-this.props.passTime)%S/6e4);return e<10?"0"+e:e})),a()(this,"ToSec",(()=>{let e=Math.floor((this.props.targetDate-this.props.passTime)%6e4/1e3);return e<10?"0"+e:e}))}static get propTypes(){return{targetDate:l().instanceOf(Date),passTime:l().instanceOf(Date),delTimer:l().func,title:l().string}}render(){return r.createElement(C,null,r.createElement(I,null,r.createElement(_,null),r.createElement(_,{className:"blockTitle"},this.props.title),r.createElement(_,{className:"lastButton"},r.createElement(j,{onClick:()=>{this.props.delTimer(this.props.title)}},"x"))),r.createElement(T,null,r.createElement("div",null,r.createElement("p",null,this.ToDays()),"days"),r.createElement("div",null,r.createElement("p",null,this.ToHour()),"hours"),r.createElement("div",null,r.createElement("p",null,this.ToMin()),"minutes"),r.createElement("div",null,r.createElement("p",null,this.ToSec()),"seconds")))}}const N=d.ZP.div.withConfig({displayName:"CountDown__MainDiv",componentId:"sc-16pguoj-13"})(['*{box-sizing:border-box;}padding-top:5rem;width:100vw;min-height:calc(100vh - 24px);height:auto;color:white;display:flex;justify-content:center;align-items:center;flex-direction:column;font-size:3rem;font-family:"Poppins",sans-serif;@media screen and (max-width:800px){font-size:2.5rem;}']),z=d.ZP.button.withConfig({displayName:"CountDown__PlusButton",componentId:"sc-16pguoj-14"})(["font-size:5rem;border-radius:50%;width:5.5rem;height:5.5rem;margin:2rem;display:flex;justify-content:center;align-items:center;background:white;-webkit-appearance:none;appearance:none;@media screen and (max-width:768px){width:40px;height:40px;font-size:1.5rem;}&:hover{box-shadow:0 0 20px rgba(255,255,255,0.5)}&:focus{outline:none;}"]);class B extends r.Component{constructor(e){super(e),a()(this,"FetchOld",(async e=>{fetch("http://114.32.157.74/PythonFlask/api/v1/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({method:"get-timer",name:e})}).then((e=>e.json())).then((e=>{e.timers.map((e=>{this.SendDateToStore(e,!1)}))})).catch((e=>{console.log(e)}))})),a()(this,"countdown",(()=>{let e=new Date;this.setState({passTime:e})})),a()(this,"SetEditDisplay",(e=>{this.setState({editDis:e})})),a()(this,"SendDateToStore",((e,t=!0)=>{t&&""!=this.props.name&&fetch("http://114.32.157.74/PythonFlask/api/v1/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({method:"insert-timer",title:e.title,year:parseInt(e.year),month:parseInt(e.month),day:parseInt(e.day),hour:parseInt(e.hour),minute:parseInt(e.minute),second:parseInt(e.second),isAnnual:e.isAnnual,important:!1,name:this.props.name})}),this.props.addDate(e),this.setState({editDis:"none"})})),a()(this,"deleteTimerAPI",(e=>{fetch("http://114.32.157.74/PythonFlask/api/v1/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({method:"del-timer",title:e,name:this.props.name})}).catch((e=>{console.log(e)}))})),a()(this,"deleteTimer",(e=>{this.deleteTimerAPI(e),this.props.deleteDate(e)})),this.state={passTime:0,editDis:"none"},this.newYear=new Date("1 Jan 2021"),this.timerID=0}static get propTypes(){return{name:l().string,deleteDate:l().func,data:l().array,addDate:l().func,setUser:l().func,clearTimer:l().func}}componentDidMount(){const{accState:e}=this.context;this.timerID=setInterval(this.countdown,1e3),""!=e.account?(this.props.data.length<=0||this.props.name!=e.account)&&(this.FetchOld(e.account).then((()=>{this.props.data.length<=0&&this.props.addDate(p)})),this.props.setUser(e.account)):this.props.clearTimer()}componentWillUnmount(){clearInterval(this.timerID)}render(){let e=this.props.data.map(((e,t)=>{let n=(new Date).getFullYear(),i=new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second);return i<new Date&&1==e.isAnnual&&(i=new Date(n+1,e.month-1,e.day,e.hour,e.minute,e.second)),r.createElement(k,{key:t,title:e.title,targetDate:i,passTime:this.state.passTime,delTimer:this.deleteTimer})}));return r.createElement(N,null,e,r.createElement(b,{display:this.state.editDis,setDis:this.SetEditDisplay,sendDate:this.SendDateToStore}),r.createElement(z,{onClick:()=>{this.setState({editDis:"flex"})}},"+"))}}a()(B,"contextType",m.w);const O=(0,o.$j)((e=>({data:e.dates,name:e.curUser})),(e=>({addDate:t=>e((e=>({type:"addDate",payload:e}))(t)),deleteDate:t=>e((e=>({type:"deleteDate",payload:e}))(t)),setUser:t=>e((e=>({type:"setUser",payload:e}))(t)),clearTimer:t=>e((e=>({type:"clearTimer",payload:e}))(t))})))(B);class Z extends r.Component{render(){return r.createElement(o.zt,{store:u},r.createElement(O,null))}}}}]);