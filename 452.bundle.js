(self.webpackChunkproject_test=self.webpackChunkproject_test||[]).push([[452],{1216:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>te});var i=n(7757),r=n.n(i),o=n(8926),a=n.n(o),l=n(4575),d=n.n(l),s=n(3913),c=n.n(s),u=n(1506),m=n.n(u),p=n(2205),h=n.n(p),f=n(8585),y=n.n(f),g=n(9754),w=n.n(g),v=n(9713),x=n.n(v),D=n(7294),b=n(8048),E=n(9163),C=n(319),I=n.n(C),j=n(4890);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){x()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={title:"New Year!!",year:2021,month:1,day:1,hour:0,minute:0,second:0,isAnnual:!0},_={dates:[]},O=function(e){return{type:"deleteDate",payload:e}},S=(0,j.MT)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addDate":return P(P({},e),{},{dates:[].concat(I()(e.dates),[t.payload])});case"deleteDate":return P(P({},e),{},{dates:e.dates.filter((function(e){return e.title!==t.payload}))});default:return e}}));function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y()(this,n)}}window.store=S,window.deleteDate=O;var z=E.ZP.div.withConfig({displayName:"CountDown__EditDiv",componentId:"sc-16pguoj-0"})(["width:70%;height:auto;display:",";flex-direction:column;align-items:center;@media screen and (max-width:767px){font-size:1.5rem;}&:hover{box-shadow:0 0 20px rgba(0,0,0,0.5)}"],(function(e){return e.display||"flex"})),B=E.ZP.input.withConfig({displayName:"CountDown__EditInput",componentId:"sc-16pguoj-1"})(["font-size:2rem;width:100%;background:rgb(47,49,54);border:1px solid rgba(255,255,255,0.5);border-radius:9px;margin:0 1rem;color:white;&:hover{box-shadow:inset 0 0 10px white;}@media screen and (max-width:767px) and (min-width:375px){font-size:1rem;}@media screen and (max-width:374px){font-size:0.7rem;}"]),Z=E.ZP.div.withConfig({displayName:"CountDown__EditSecDiv",componentId:"sc-16pguoj-2"})(["display:flex;width:100%;margin:1rem 0;#title{width:80%;}"]),A=E.ZP.div.withConfig({displayName:"CountDown__EditButSecDiv",componentId:"sc-16pguoj-3"})(["display:flex;justify-content:flex-end;width:100%;margin:1rem 0;"]),M=E.ZP.button.withConfig({displayName:"CountDown__EditButton",componentId:"sc-16pguoj-4"})(["margin:0 1rem;font-size:2rem;background:rgb(47,49,54);border:1px solid rgba(255,255,255,0.3);border-radius:9px;color:white;@media screen and (max-width:414px){font-size:1rem;margin:0 0.2rem;}"]),F=E.ZP.div.withConfig({displayName:"CountDown__OptionDiv",componentId:"sc-16pguoj-5"})(["display:flex;align-items:center;justify-content:center;width:15%;@media screen and (max-width:768px){width:25%;}@media screen and (max-width:540px){width:36%;}@media screen and (max-width:375px){width:27%;}"]),R=E.ZP.input.withConfig({displayName:"CountDown__OptionInput",componentId:"sc-16pguoj-6"})(["margin:5px;width:31.719px;height:31.719px;@media screen and (max-width:425px){width:15px;height:15px;}"]),H=E.ZP.label.withConfig({displayName:"CountDown__OptionLabel",componentId:"sc-16pguoj-7"})(["font-size:2rem;margin-bottom:0;@media screen and (max-width:425px){font-size:1rem;}"]),J=function(e){h()(n,e);var t=N(n);function n(){var e;d()(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),x()(m()(e),"gatherDateInfo",(function(){var t=document.getElementById("IsAnnually").checked;console.log("checked ? ",t);var n={title:document.getElementById("title").value,year:document.getElementById("y").value,month:document.getElementById("m").value,day:document.getElementById("d").value,hour:document.getElementById("hr").value,minute:document.getElementById("min").value,second:document.getElementById("sec").value,isAnnual:t};for(var i in n)if("isAnnual"==i){if(null==t)return void alert("checkbox error")}else if("year"==i&&0==n.isAnnual){if(isNaN(n[i])||""==n[i])return void alert("未指定年分")}else if("month"==i){if(n[i]>12||n[i]<1)return void alert("指定月份錯誤")}else if("day"==i){var r=new Date(n.year,n.month,0).toString().split(" ")[2];if(n[i]<1||n[i]>r)return void alert("指定日期錯誤")}else if("hour"==i){if(n[i]<0||n[i]>=24)return void alert("指定小時數錯誤")}else if("minute"==i){if(n[i]<0||n[i]>=60)return void alert("指定分鐘數錯誤")}else if("second"==i){if(n[i]<0||n[i]>=60)return void alert("指定秒數錯誤")}else if("title"==i&&null==n[i])return void alert("未輸入標題");e.props.sendDate(n)})),e}return c()(n,[{key:"render",value:function(){var e=this;return D.createElement(z,{display:this.props.display,className:"EditDiv"},"輸入你自己的計時器",D.createElement(Z,null,D.createElement(B,{id:"title",className:"title",placeholder:"Title"}),D.createElement(F,null,D.createElement(R,{type:"checkbox",id:"IsAnnually"}),D.createElement(H,null,"每年"))),D.createElement(Z,null,D.createElement(B,{id:"y",placeholder:"year"}),D.createElement(B,{id:"m",placeholder:"month"}),D.createElement(B,{id:"d",placeholder:"day"})),D.createElement(Z,null,D.createElement(B,{id:"hr",placeholder:"hour"}),D.createElement(B,{id:"min",placeholder:"minute"}),D.createElement(B,{id:"sec",placeholder:"second"})),D.createElement(A,null,D.createElement(M,{onClick:this.gatherDateInfo},"Save"),D.createElement(M,{onClick:function(){e.props.setDis("none")}},"Cancel")))}}]),n}(D.Component),Y=E.ZP.div.withConfig({displayName:"CountDown__TimeDiv",componentId:"sc-16pguoj-8"})(["display:flex;font-size:2rem;text-align:center;div{margin:0 2rem;@media screen and (max-width:540px){margin:0 1rem;}}p{font-weight:bold;font-size:5rem;}@media screen and (max-width:800px){div{font-size:2rem;margin:0 2rem;}p{font-size:3rem;}}@media screen and (max-width:540px){div{font-size:1rem;margin:0 1rem;}}@media screen and (max-width:425px){div{font-size:1rem;margin:0 0.9rem;}p{font-size:2rem;}}@media screen and (max-width:280px){div{margin:0px 0.3rem;}}"]),L=E.ZP.div.withConfig({displayName:"CountDown__TimerBlockDiv",componentId:"sc-16pguoj-9"})(["display:flex;align-items:center;justify-content:center;flex-direction:column;margin-bottom:2rem;border-radius:20px;width:70%;&:hover{box-shadow:0 0 20px black;}"]),U=E.ZP.div.withConfig({displayName:"CountDown__HeaderDiv",componentId:"sc-16pguoj-10"})(["display:flex;width:100%;justify-content:space-between;align-items:center;.lastButton{justify-content:flex-end;}.blockTitle{justify-content:center;text-align:center;@media screen and (max-width:280px){font-size:2rem;}}"]),W=E.ZP.button.withConfig({displayName:"CountDown__HeaderButton",componentId:"sc-16pguoj-11"})(["font-size:3rem;background:none;color:#B6B8C1;text-align:right;@media screen and (max-width:425px){font-size:2rem;}&:hover,&:active{color:white;}&:focus{outline:none;div{display:flex;}}"]),$=E.ZP.div.withConfig({displayName:"CountDown__TimerTitleSep",componentId:"sc-16pguoj-12"})(["width:25%;display:flex;"]),q=864e5,G=36e5,K=function(e){h()(n,e);var t=N(n);function n(e){var i;return d()(this,n),i=t.call(this,e),x()(m()(i),"ToDays",(function(){var e=Math.floor((i.props.targetDate-i.props.passTime)/q);return e<10?"0"+e:e})),x()(m()(i),"ToHour",(function(){var e=Math.floor((i.props.targetDate-i.props.passTime)%q/G);return e<10?"0"+e:e})),x()(m()(i),"ToMin",(function(){var e=Math.floor((i.props.targetDate-i.props.passTime)%G/6e4);return e<10?"0"+e:e})),x()(m()(i),"ToSec",(function(){var e=Math.floor((i.props.targetDate-i.props.passTime)%6e4/1e3);return e<10?"0"+e:e})),i}return c()(n,[{key:"render",value:function(){var e=this;return D.createElement(L,null,D.createElement(U,null,D.createElement($,null),D.createElement($,{className:"blockTitle"},this.props.title),D.createElement($,{className:"lastButton"},D.createElement(W,{onClick:function(){e.props.delTimer(e.props.title)}},"x"))),D.createElement(Y,null,D.createElement("div",null,D.createElement("p",null,this.ToDays()),"days"),D.createElement("div",null,D.createElement("p",null,this.ToHour()),"hours"),D.createElement("div",null,D.createElement("p",null,this.ToMin()),"minutes"),D.createElement("div",null,D.createElement("p",null,this.ToSec()),"seconds")))}}]),n}(D.Component),Q=E.ZP.div.withConfig({displayName:"CountDown__MainDiv",componentId:"sc-16pguoj-13"})(['*{box-sizing:border-box;}padding-top:5rem;width:100vw;min-height:100vh;height:auto;color:white;display:flex;justify-content:center;align-items:center;flex-direction:column;font-size:3rem;font-family:"Poppins",sans-serif;@media screen and (max-width:800px){font-size:2.5rem;}']),V=E.ZP.button.withConfig({displayName:"CountDown__PlusButton",componentId:"sc-16pguoj-14"})(["font-size:5rem;border-radius:50%;width:5.5rem;height:5.5rem;margin:2rem;display:flex;justify-content:center;align-items:center;background:white;-webkit-appearance:none;appearance:none;@media screen and (max-width:768px){width:40px;height:40px;font-size:1.5rem;}&:hover{box-shadow:0 0 20px rgba(255,255,255,0.5)}&:focus{outline:none;}"]),X=function(e){h()(n,e);var t=N(n);function n(e){var i;return d()(this,n),i=t.call(this,e),x()(m()(i),"FetchOld",a()(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("http://114.32.157.74/PythonFlask/api/v1/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({method:"get-timer"})}).then((function(e){return e.json()})).then((function(e){e.timers.map((function(e){i.SendDateToStore(e,!1)}))})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})))),x()(m()(i),"countdown",(function(){var e=new Date;i.setState({passTime:e})})),x()(m()(i),"SetEditDisplay",(function(e){i.setState({editDis:e})})),x()(m()(i),"SendDateToStore",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&fetch("http://114.32.157.74/PythonFlask/api/v1/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({method:"insert-timer",title:e.title,year:parseInt(e.year),month:parseInt(e.month),day:parseInt(e.day),hour:parseInt(e.hour),minute:parseInt(e.minute),second:parseInt(e.second),isAnnual:e.isAnnual})}),i.props.addDate(e),i.setState({editDis:"none"})})),x()(m()(i),"deleteTimerAPI",(function(e){fetch("http://114.32.157.74/PythonFlask/api/v1/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({method:"del-timer",title:e})}).catch((function(e){console.log(e)}))})),x()(m()(i),"deleteTimer",(function(e){i.deleteTimerAPI(e),i.props.deleteDate(e)})),i.state={passTime:0,editDis:"none"},i.newYear=new Date("1 Jan 2021"),i.timerID=0,i}return c()(n,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval(this.countdown,1e3),this.props.data.length<=0&&this.FetchOld().then((function(){e.props.data.length<=0&&e.props.addDate(k)}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){var e=this,t=this.props.data.map((function(t){var n=(new Date).getFullYear(),i=new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second);return i<new Date&&1==t.isAnnual&&(i=new Date(n+1,t.month-1,t.day,t.hour,t.minute,t.second)),D.createElement(K,{title:t.title,targetDate:i,passTime:e.state.passTime,delTimer:e.deleteTimer})}));return D.createElement(Q,null,t,D.createElement(J,{display:this.state.editDis,setDis:this.SetEditDisplay,sendDate:this.SendDateToStore}),D.createElement(V,{onClick:function(){e.setState({editDis:"flex"})}},"+"))}}]),n}(D.Component),ee=(0,b.$j)((function(e){return{data:e.dates}}),(function(e){return{addDate:function(t){return e(function(e){return{type:"addDate",payload:e}}(t))},deleteDate:function(t){return e(O(t))}}}))(X),te=function(e){h()(n,e);var t=N(n);function n(){return d()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){return D.createElement(b.zt,{store:S},D.createElement(ee,null))}}]),n}(D.Component)}}]);